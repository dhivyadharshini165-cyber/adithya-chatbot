<!DOCTYPE html>
<html>
<head>
<title>AI College Assistant</title>

<style>
body{
    font-family: Arial;
    background:#0f172a;
    color:white;
    margin:0;
}

.chatbox{
    width:100%;
    height:100vh;
    display:flex;
    flex-direction:column;
}

.header{
    background:#1e293b;
    padding:15px;
    text-align:center;
    font-size:20px;
}

.messages{
    flex:1;
    padding:15px;
    overflow-y:auto;
}

.user{
    text-align:right;
    margin:10px;
}

.bot{
    text-align:left;
    margin:10px;
    color:#38bdf8;
}

input{
    width:100%;
    padding:15px;
    border:none;
    font-size:16px;
    outline:none;
}
</style>
</head>

<body>

<div class="chatbox">
    <div class="header">AI College Assistant ðŸ¤–</div>
    <div class="messages" id="chat"></div>

    <input
        type="text"
        id="input"
        placeholder="Ask about courses, placements, career..."
        onkeydown="send(event)"
        onkeyup="send(event)"
    >
</div>

<script>
const input = document.getElementById("input");
const chat = document.getElementById("chat");

function send(e){
    if(e.key === "Enter"){
        let msg = input.value.trim();

        // âœ… VERY IMPORTANT GUARD (mobile + laptop fix)
        if(msg === "") return;

        chat.innerHTML += `<div class="user">${msg}</div>`;

        fetch(window.location.origin + "/chatbot", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            credentials: "same-origin",
            body: JSON.stringify({ message: msg })
        })
        .then(res => res.json())
        .then(data => {
            chat.innerHTML += `<div class="bot">${data.reply}</div>`;
            chat.scrollTop = chat.scrollHeight;
        })
        .catch(err => {
            chat.innerHTML += `<div class="bot">Technical issue. Please try again.</div>`;
            console.error(err);
        });

        input.value = "";
    }
}
</script>

</body>
</html>

